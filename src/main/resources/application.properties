spring.application.name=java-chat

# HTTP server
server.port=${PORT:8080}

# Spring AI - OpenAI-compatible (GitHub Models)
spring.ai.openai.base-url=${GITHUB_MODELS_BASE_URL:https://models.github.ai/inference}
spring.ai.openai.chat.options.model=${GITHUB_MODELS_CHAT_MODEL:openai/gpt-5-mini}
spring.ai.openai.chat.options.temperature=${OPENAI_TEMPERATURE:1}
# Avoid misbinding: comment out stream-options entirely for GitHub Models
# spring.ai.openai.chat.options.stream-options=
spring.ai.openai.api-key=${GITHUB_TOKEN:}

# Embeddings model (OpenAI compat). Point to local server if provided
spring.ai.openai.embedding.options.model=${GITHUB_MODELS_EMBED_MODEL:text-embedding-nomic-embed-text-v1.5}
spring.ai.openai.embedding.base-url=${EMBEDDINGS_BASE_URL:http://127.0.0.1:1234/v1}

# Qdrant configuration (Cloud)
spring.ai.vectorstore.qdrant.host=${QDRANT_HOST:}
spring.ai.vectorstore.qdrant.port=${QDRANT_PORT:6334}
spring.ai.vectorstore.qdrant.api-key=${QDRANT_API_KEY:}
spring.ai.vectorstore.qdrant.use-tls=${QDRANT_SSL:true}
spring.ai.vectorstore.qdrant.collection-name=${QDRANT_COLLECTION:java24-docs}

# Retrieval defaults
app.rag.chunk-max-tokens=${RAG_CHUNK_MAX_TOKENS:900}
app.rag.chunk-overlap-tokens=${RAG_CHUNK_OVERLAP_TOKENS:150}
app.rag.search-top-k=${RAG_TOP_K:12}
app.rag.search-return-k=${RAG_RETURN_K:6}
app.rag.search-citations=${RAG_CITATIONS_K:3}
app.rag.search-mmr-lambda=${RAG_MMR_LAMBDA:0.5}

# Java 24 docs crawl root (immutable snapshot target)
app.docs.root-url=${DOCS_ROOT_URL:https://docs.oracle.com/en/java/javase/24/}
app.docs.jdk-version=${DOCS_JDK_VERSION:24}
app.docs.snapshot-dir=${DOCS_SNAPSHOT_DIR:data/snapshots}
app.docs.parsed-dir=${DOCS_PARSED_DIR:data/parsed}
app.docs.index-dir=${DOCS_INDEX_DIR:data/index}

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
