spring.profiles.active=test
app.ports.killOnConflict=false
app.ports.range=18085-18090

# Ensure LocalStoreService and related components have test-safe directories
# Use OS temp dir to avoid writing into the repo; directories are created on demand
app.docs.snapshot-dir=${java.io.tmpdir}/java-chat-test/snapshots
app.docs.parsed-dir=${java.io.tmpdir}/java-chat-test/parsed
app.docs.index-dir=${java.io.tmpdir}/java-chat-test/index
app.docs.root-url=https://docs.oracle.com/en/java/javase/24/
app.docs.jdk-version=24

# Qdrant gRPC connection settings (used by QdrantClientConfig)
spring.ai.vectorstore.qdrant.host=127.0.0.1
spring.ai.vectorstore.qdrant.port=6334
spring.ai.vectorstore.qdrant.use-tls=false
spring.ai.vectorstore.qdrant.api-key=

# Test collection names
app.qdrant.collections.books=test-books
app.qdrant.collections.docs=test-docs
app.qdrant.collections.articles=test-articles
app.qdrant.collections.pdfs=test-pdfs
app.qdrant.dense-vector-name=dense
app.qdrant.sparse-vector-name=bm25
app.qdrant.prefetch-limit=10
app.qdrant.query-timeout=5s

# Disable optional AI features during tests to avoid API key requirements
# EmbeddingClient is supplied by test mocks in @SpringBootTest contexts
spring.ai.model.audio.speech=none
spring.ai.model.audio.transcription=none
spring.ai.model.image=none
spring.ai.model.moderation=none
spring.ai.model.chat=none
# Embedding is NOT disabled - QdrantIndexInitializer requires EmbeddingClient
# spring.ai.model.embedding=none  # REMOVED - causes bean creation failures

# Disable Qdrant initialization in tests (no actual Qdrant instance)
app.qdrant.ensure-payload-indexes=false
app.qdrant.ensure-collections=false

# Embedding dimensions must match the configured embedding model
app.embeddings.dimensions=1536

# Required by RequiredCredentialValidation to pass in @SpringBootTest contexts
GITHUB_TOKEN=test-token
