spring.profiles.active=test
app.ports.killOnConflict=false
app.ports.range=18085-18090

# Ensure LocalStoreService and related components have test-safe directories
# Use OS temp dir to avoid writing into the repo; directories are created on demand
app.docs.snapshot-dir=${java.io.tmpdir}/java-chat-test/snapshots
app.docs.parsed-dir=${java.io.tmpdir}/java-chat-test/parsed
app.docs.index-dir=${java.io.tmpdir}/java-chat-test/index
app.docs.root-url=https://docs.oracle.com/en/java/javase/24/
app.docs.jdk-version=24

# Ensure EmbeddingCacheService doesn't read/write repo-local cache files during tests
# Use a unique temp directory per test run to avoid cross-run flakiness.
app.embeddings.cache-dir=${java.io.tmpdir}/java-chat-test/embeddings-cache-${random.uuid}

# Provide Qdrant properties to satisfy AuditService field injection during tests
spring.ai.vectorstore.qdrant.host=127.0.0.1
spring.ai.vectorstore.qdrant.port=6334
spring.ai.vectorstore.qdrant.use-tls=false
spring.ai.vectorstore.qdrant.api-key=
# Use a throwaway collection name for safety in tests
spring.ai.vectorstore.qdrant.collection-name=java-chat-test

# Disable optional AI features during tests to avoid API key requirements
spring.ai.model.audio.speech=none
spring.ai.model.audio.transcription=none
spring.ai.model.image=none
spring.ai.model.moderation=none
spring.ai.model.chat=none
spring.ai.model.embedding=none
